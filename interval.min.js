!function(){"use strict";window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}),window.cancelAnimationFrame||(window.cancelAnimationFrame=window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.clearTimeout);var t=function(){var t=this;this.frame=0,this.listOfEvents=[this.EVERY_05_SEC,this.EVERY_1_SEC,this.EVERY_5_SEC,this.EVERY_15_SEC,this.EVERY_30_SEC,this.EVERY_60_SEC],this.listOfEvents.forEach(function(t){this.nums[t]=0,this.events[t]=[]}.bind(this)),this.requestFrameFn=function(){t.processCall(),t.requestFrameId=window.requestAnimationFrame(t.requestFrameFn)},document.hasFocus()===!1?this.onBlurWindow():this.onFocusWindow(),window.onfocus=this.onFocusWindow.bind(this),window.onblur=this.onBlurWindow.bind(this)};t.prototype.lastUpdate=(new window.Date).getTime(),t.prototype.requestFrameFn=null,t.prototype.intervalId=null,t.prototype.requestFrameId=null,t.prototype.nums={},t.prototype.events={},t.prototype.frame=1,t.prototype.EVERY_05_SEC=30,t.prototype.EVERY_1_SEC=60,t.prototype.EVERY_5_SEC=300,t.prototype.EVERY_15_SEC=900,t.prototype.EVERY_30_SEC=1800,t.prototype.EVERY_60_SEC=3600,t.prototype.onFocusWindow=function(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),this.requestFrameId=window.requestAnimationFrame(this.requestFrameFn)},t.prototype.onBlurWindow=function(){if(null!==this.requestFrameId&&window.cancelAnimationFrame(this.requestFrameId),null===this.intervalId){var t=this;this.intervalId=setInterval(function(){t.processCall()},16)}},t.prototype.processCall=function(){var t=(new window.Date).getTime(),e=parseInt(t-this.lastUpdate,10);this.processFrame(e>=100?parseInt(e/16.6,10):1),this.lastUpdate=t},t.prototype.processFrame=function(t){var e,n;for(e=0;t>e;e++)for(this.frame+=1,n=0;n<this.listOfEvents.length;n++)this.nums[this.listOfEvents[n]]&&this.frame%this.listOfEvents[n]===0&&this.trigger(this.listOfEvents[n])},t.prototype.on=function(t,e,n){this.nums[t]+=1,this.events[t].push({fn:e,context:n})},t.prototype.once=function(t,e,n){var i=function(){this.off(t,e,n),e.apply(n)};this.nums[t]+=1,this.events[t].push({fn:i,context:this})},t.prototype.off=function(t,e,n){var i,o={fn:e,context:n};this.nums[t]-=1,i=this.events[t].indexOf(o),-1!==i&&this.events[t].splice(i,1)},t.prototype.trigger=function(t){var e,n=this.events[t];for(e=0;e<n.length;e++)n[e].fn.apply(n[e].context)},window.define?define("intervalJS",function(){return new t}):window.intervalJS=new t}();